"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[40],{4040:function(t,e,n){n.r(e);var r,s=n(4165),o=n(5861),a=n(9439),i=n(1295),l=n(3425),p=n(4087),m=n(2893),d=n(9229),c=n(5232),u=n(2701),x=n(4585),f=n(7732),h=n(6146),b=n(4224),g=n(7886),w=n(3544),j=n(3380),v=n(7693),y=n(7521),S=n(4653),C=n(2791),k=n(1024),Z=n(6856),z=n(3263),P=n(4880),I=n(2730),E=n(184),N=(0,I.B1)({breakpoints:{base:"250px",sm:"600px",md:"1300px",lg:"950px",xl:"2304px","2xl":"4096px"}});e.default=function(){var t=(0,k.g)(),e=t.user,n=t.setUser,I=(0,i.p)(),U=(0,P.k6)(),O=(0,C.useState)(e.name),W=(0,a.Z)(O,2),K=W[0],A=W[1],_=(0,C.useState)(),D=(0,a.Z)(_,2),T=D[0],F=D[1],L=(0,C.useState)(),Y=(0,a.Z)(L,2),$=Y[0],q=Y[1],B=(0,C.useState)(),H=(0,a.Z)(B,2),J=H[0],M=H[1],R=(0,C.useState)(e.pic),G=(0,a.Z)(R,2),V=G[0],Q=G[1],X=(0,C.useState)(!1),tt=(0,a.Z)(X,2),et=(tt[0],tt[1],(0,C.useState)(!1)),nt=(0,a.Z)(et,2),rt=nt[0],st=nt[1],ot=(0,C.useState)(0),at=(0,a.Z)(ot,2),it=at[0],lt=at[1],pt=(0,C.useState)("Edit Profile"),mt=(0,a.Z)(pt,2),dt=mt[0],ct=mt[1],ut=(0,C.useState)(!0),xt=(0,a.Z)(ut,2),ft=xt[0],ht=xt[1],bt=(0,C.useState)(!1),gt=(0,a.Z)(bt,2),wt=gt[0],jt=gt[1],vt=(0,C.useState)(""),yt=(0,a.Z)(vt,2),St=yt[0],Ct=yt[1],kt=(0,C.useRef)(null),Zt=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(){var r,o,a,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return st(!0),t.prev=1,r={headers:{"Content-type":"application/json"}},o=e._id,t.next=6,z.Z.post("/api/user/update-user",{name:K,pic:V,id:o},r);case 6:a=t.sent,i=a.data,console.log(i),I({title:"Update Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),localStorage.setItem("userInfo",JSON.stringify(i)),n(i),lt((function(t){1})),st(!1),U.push("/main"),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),I({title:"Error Occured!",description:t.t0.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),st(!1);case 21:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}(),zt=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(){var n,o,a,i,l,p;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-type":"application/json"}},o=e._id,a=T,t.next=6,z.Z.get("/api/user/verify-password/".concat(o,"/").concat(a),n);case 6:if(i=t.sent,l=i.data,r){t.next=11;break}return I({title:"Passwords Must be in format ",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),t.abrupt("return");case 11:if($===J){t.next=14;break}return I({title:"Passwords Do Not Match",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),t.abrupt("return");case 14:if(!l){t.next=25;break}return t.prev=15,p={headers:{"Content-type":"application/json"}},t.next=19,z.Z.post("/api/user/update-password",{id:o,newPassword:$},p).then((function(t){console.log(t.data),jt(!0),Ct("Your password has been updated successfully. Please log in again.")})).catch((function(t){console.log(t)}));case 19:t.next=23;break;case 21:t.prev=21,t.t0=t.catch(15);case 23:t.next=27;break;case 25:return I({title:"Error Occured!",description:"Old PassWord is not correct",status:"error",duration:5e3,isClosable:!0,position:"bottom"}),t.abrupt("return");case 27:t.next=32;break;case 29:t.prev=29,t.t1=t.catch(0),I({title:"Error Occured!",description:"PassWord not updated",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 32:case"end":return t.stop()}}),t,null,[[0,29],[15,21]])})));return function(){return t.apply(this,arguments)}}(),Pt=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(){var n,r,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.email,console.log("email ",n),t.prev=2,r={headers:{"Content-type":"application/json"}},t.next=6,z.Z.post("/api/user/forgot-password",{email:n},r);case 6:o=t.sent,o.data,I({title:"Email Sent Successful",status:"success",duration:2e3,isClosable:!0,position:"bottom"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),I({title:"Email not sent!",description:t.t0.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}(),It=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(){var r,o,a,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Q(null),t.prev=1,r={headers:{"Content-type":"application/json"}},o=e._id,t.next=6,z.Z.post("/api/user/remove-pic",{id:o},r);case 6:a=t.sent,i=a.data,I({title:"Profile removed Successful",status:"success",duration:2e3,isClosable:!0,position:"bottom"}),localStorage.setItem("userInfo",JSON.stringify(i)),n(i),lt((function(t){1})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),I({title:"Please Upload Image First!",description:t.t0.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(){return t.apply(this,arguments)}}();return(0,C.useEffect)((function(){console.log("updated",it)}),[it]),(0,C.useEffect)((function(){ht(!(T&&$&&J))}),[T,$,J]),(0,E.jsx)(l.x,{theme:N,children:(0,E.jsx)(p.xu,{children:(0,E.jsxs)(m.U,{mb:10,mt:10,ml:20,mr:20,justifyContent:"center",alignItems:"center",overflow:"hidden",children:[(0,E.jsxs)(p.xu,{width:{base:"100%",md:"22%"},display:{base:"none",md:"block",sm:"none"},mr:0,bg:"#ffffff",borderWidth:"1px",h:{base:"auto",md:"90vh"},children:[(0,E.jsx)(p.xu,{mt:250,children:(0,E.jsx)(d.x,{fontSize:{base:20,md:25},fontWeight:"semibold",ml:{base:1,md:14},mt:{base:10,md:5},mb:5,children:"Update User"})}),(0,E.jsxs)(c.K,{mt:10,height:{base:"auto",md:"10vh"},children:[(0,E.jsx)(p.xu,{onClick:function(){ct("Edit Profile")},display:"flex",cursor:"pointer",bg:"Edit Profile"===dt?"#2b6cb0":"#ffffff",color:"Edit Profile"===dt?"#ffffff":"black",w:{base:"100%",md:"93%"},ml:{base:0,md:2},mr:{base:0,md:2},mb:{base:4,md:0},children:(0,E.jsx)(d.x,{display:"grid",m:"auto",mb:0,h:"5vh",alignContent:"center",children:"Edit Profile"})}),(0,E.jsx)(p.xu,{onClick:function(){ct("Change Password")},display:"flex",cursor:"pointer",bg:"Change Password"===dt?"#2b6cb0":"#ffffff",color:"Change Password"===dt?"#ffffff":"black",w:{base:"100%",md:"93%"},ml:{base:0,md:"8px !important"},mr:{base:0,md:"8px !important"},children:(0,E.jsx)(d.x,{display:"grid",m:"auto",h:"5vh",alignContent:"center",children:"Change Password"})})]})]}),"Edit Profile"===dt&&(0,E.jsxs)(p.xu,{display:"flex",flexDir:"column",p:3,bg:"white",w:"78%",maxWidth:{base:"60%",sm:"80%",md:"80%",lg:"80%"},borderWidth:"1px",h:"90vh",ml:"0px !important",children:[(0,E.jsx)(p.xu,{display:"flex",alignItems:"center",w:"80%",ml:"auto",mr:"auto",flexDir:"column",children:(0,E.jsx)(d.x,{fontSize:["xl","2xl","3xl"],fontWeight:"semibold",mt:2,children:"Edit Profile"})}),(0,E.jsxs)(c.K,{mt:35,direction:{sm:"column",base:"column",md:"row"},spacing:{base:"20px",md:"0px"},children:[(0,E.jsx)(p.xu,{w:{base:"80%",md:"40%",sm:"80%"},ml:{base:"0px !important",md:"5%",sm:"10px !important"},m:{md:2},p:{md:5},children:(0,E.jsx)("form",{style:{width:"100%"},children:(0,E.jsxs)(u.NI,{id:"pic",ml:{base:"25px !important",md:"0% !important",sm:"10px !important"},children:[(0,E.jsx)(x.l,{mb:5,ml:{base:10,md:0,sm:0},children:"Profile Picture"}),(0,E.jsxs)(c.K,{direction:{base:"column",md:"row",sm:"row"},children:[(0,E.jsx)(f.q,{size:{md:"2xl",sm:"xl",base:"xl"},cursor:"pointer",name:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.pic,ml:2,mr:5}),(0,E.jsxs)(h.g,{children:[(0,E.jsx)(b.z,{leftIcon:(0,E.jsx)(Z.zmo,{}),w:{base:"85%",md:"100%",sm:"90%"},fontSize:{sm:"14px !important",md:"16px !important",base:"10px !important"},mt:{base:0,md:5,sm:0},onClick:function(){kt.current.click()},children:"Update Profile Picture"}),(0,E.jsx)(g.I,{display:"none",type:"file",ref:kt,p:1.5,accept:"image/*",onChange:function(t){!function(t){if(st(!0),console.log("pics ",t),void 0!==t){if("image/jpeg"!==t.type&&"image/png"!==t.type)return I({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void st(!1);var e=new FormData;e.append("file",t),e.append("upload_preset","chat-app"),e.append("cloud_name","dm37epkmg"),fetch("https://api.cloudinary.com/v1_1/dm37epkmg/image/upload",{method:"post",body:e}).then((function(t){return t.json()})).then((function(t){Q(t.url.toString()),console.log(t.url.toString()),st(!1)})).catch((function(t){console.log(t),st(!1)}))}else I({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})}(t.target.files[0])}}),(0,E.jsx)(b.z,{leftIcon:(0,E.jsx)(Z.ZkW,{}),w:{base:"85%",md:"100%",sm:"90%"},fontSize:{sm:"14px !important",md:"16px !important",base:"10px !important"},onClick:It,children:"Remove Profile Picture"})]})]})]})})}),(0,E.jsx)(p.xu,{w:{base:"80%",md:"60%"},m:2,mr:{base:"0px !important",md:"5%"},ml:{base:"20px !important",md:"0%",sm:"60px"},p:{base:0,md:5},children:(0,E.jsxs)("form",{style:{width:"100%"},children:[(0,E.jsx)(u.NI,{id:"first-name",mt:14,children:(0,E.jsxs)(m.U,{children:[(0,E.jsx)(x.l,{fontSize:{base:15,sm:16},children:"Name"}),(0,E.jsx)(g.I,{placeholder:"Enter Your Name",type:"text",onChange:function(t){A(t.target.value)},defaultValue:e.name,w:{base:"40%",md:"60%",sm:"60%"}})]})}),(0,E.jsx)(u.NI,{id:"email",mt:3,children:(0,E.jsxs)(c.K,{direction:{base:"column",md:"row",sm:"row"},children:[(0,E.jsx)(x.l,{fontSize:{base:15,sm:16},children:"Email"}),(0,E.jsx)(g.I,{placeholder:"Enter Your Email",value:e.email,disabled:"true",fontSize:{base:"90% !important",sm:"70% important",md:"100% !important"},ml:"12px !important",w:{base:"50%",md:"60%",sm:"60%"}})]})})]})})]}),(0,E.jsxs)(c.K,{w:"100%",ml:{base:"0px !important",lg:"15% important",sm:"10% important",md:"15% !important"},direction:{base:"column",md:"row",sm:"column",lg:"row"},children:[(0,E.jsx)(b.z,{colorScheme:"blue",width:"15%",w:{md:"15%",base:"40%",sm:"40%",lg:"30%"},fontSize:{base:"10px",lg:"15px",sm:"12px"},ml:{md:20,base:"60px !important"},mr:2,style:{marginTop:15},onClick:Zt,isLoading:rt,children:"Update"}),(0,E.jsx)(b.z,{colorScheme:"blue",mr:5,w:{md:"15%",base:"40%",sm:"40%",lg:"30%"},fontSize:{base:"10px",lg:"15px",sm:"12px"},ml:{md:20,base:"60px !important"},style:{marginTop:15},onClick:Zt,isLoading:rt,children:"Cancel"})]})]}),"Change Password"===dt&&(0,E.jsxs)(p.xu,{display:"flex",flexDir:"column",p:150,pl:{base:10,md:150,sm:0,lg:0},pt:{base:20,md:150,sm:100,lg:100},pr:{base:10,md:150},pb:{base:10,md:150,sm:0,lg:0},bg:"white",w:"78%",maxWidth:{base:"100%",md:"80%",lg:"80%"},borderWidth:"1px",h:"90vh",ml:"0px !important",children:[(0,E.jsxs)(m.U,{children:[(0,E.jsx)(f.q,{size:"sm",cursor:"pointer",name:null===e||void 0===e?void 0:e.name,src:null===e||void 0===e?void 0:e.pic,ml:{md:"85px !important",sm:"120px !important",lg:"180px !important",base:"30px !important"},mr:5}),(0,E.jsx)(d.x,{fontSize:{md:"20px !important",lg:"16px !important",sm:"14px !important",base:"12px !important"},fontWeight:"semibold",mt:2,ml:"22px !important",children:e.name})]}),(0,E.jsx)(d.x,{fontSize:{md:"11px !important",lg:"10px !important",sm:"9px !important",base:"8px !important"},fontWeight:"semibold",mt:2,ml:{base:"60px !important",sm:"150px !important",md:"160px !important",lg:"200px !important"},children:"Password must be atleast 8 characters and must be combination of letters, numbers and special characters!"}),(0,E.jsxs)("form",{style:{width:"100%"},children:[(0,E.jsx)(u.NI,{id:"old-password",mt:8,children:(0,E.jsxs)(m.U,{children:[(0,E.jsx)(x.l,{textAlign:"right",w:{base:"50%",md:"20%"},fontSize:{md:"16px !important",lg:"14px !important",sm:"14px !important",base:"10px !important"},children:"Old password"}),(0,E.jsx)(g.I,{placeholder:"Old Password",type:"password",onChange:function(t){F(t.target.value)},fontSize:{md:"16px !important",lg:"14px !important",sm:"14px !important",base:"10px !important"},w:{base:"50%",md:"45%",sm:"40%",lg:"35%"}})]})}),(0,E.jsx)(u.NI,{id:"new-password",mt:3,children:(0,E.jsxs)(m.U,{children:[(0,E.jsx)(x.l,{textAlign:"right",w:{base:"50%",md:"20%"},fontSize:{md:"16px !important",lg:"14px !important",sm:"14px !important",base:"10px !important"},children:"New password"}),(0,E.jsx)(g.I,{placeholder:"New password",type:"password",w:{base:"50%",md:"45%",sm:"40%",lg:"35%"},fontSize:{md:"16px !important",lg:"14px !important",sm:"14px !important",base:"10px !important"},onKeyUp:function(){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test($)?(r=!0,!0):(r=!1,!1)},onChange:function(t){q(t.target.value)}})]})}),(0,E.jsx)(u.NI,{id:"cnf-new-password",mt:2,children:(0,E.jsxs)(m.U,{children:[(0,E.jsx)(x.l,{textAlign:"right",w:{base:"50%",md:"20%"},fontSize:{md:"16px !important",lg:"14px !important",sm:"14px !important",base:"10px !important"},children:"Confirm New Password"}),(0,E.jsx)(g.I,{placeholder:"Confirm new password",type:"password",w:{base:"50%",md:"45%",sm:"40%",lg:"35%"},fontSize:{md:"16px !important",lg:"14px !important",sm:"14px !important",base:"10px !important"},onChange:function(t){M(t.target.value)}})]})})]}),(0,E.jsxs)(c.K,{children:[(0,E.jsx)(b.z,{id:"change-pass",colorScheme:"blue",w:{md:"30%",base:"60%",sm:"30%",lg:"25%"},ml:{base:"80px !important",sm:"220px !important",md:"160px !important",lg:"300px !important"},fontSize:{base:"9px",sm:"12px",md:"15px",lg:"13px"},style:{marginTop:25},onClick:zt,isLoading:rt,isDisabled:ft,cursor:"pointer !important",children:"Change Password"}),(0,E.jsx)(b.z,{colorScheme:"white",color:"#718096",ml:{base:"60px !important",sm:"150px !important",md:"160px !important",lg:"200px !important"},width:{md:"30%",base:"60%",sm:"60%",lg:"60%"},fontWeight:{bold:650},fontSize:{base:"9px",sm:"12px",md:"15px",lg:"13px"},style:{marginTop:15},pl:{base:"0px !important",md:"0px !important",sm:"0px !important",lg:"0px !important"},pr:{base:0,md:0},onClick:Pt,children:"Forgotten your password?"})]}),(0,E.jsx)(w.a,{isOpen:wt,isCentered:!0,children:(0,E.jsx)(j.Z,{children:(0,E.jsxs)(w._,{children:[(0,E.jsx)(v.x,{children:"Alert"}),(0,E.jsx)(y.f,{children:St}),(0,E.jsx)(S.m,{children:(0,E.jsx)(b.z,{onClick:function(){jt(!1),localStorage.removeItem("userInfo"),localStorage.clear(),U.push("/"),window.location.reload()},colorScheme:"red",ml:3,children:"OK"})})]})})})]})]})})})}},2893:function(t,e,n){n.d(e,{U:function(){return i}});var r=n(1413),s=n(5232),o=n(7872),a=n(184),i=(0,o.G)((function(t,e){return(0,a.jsx)(s.K,(0,r.Z)((0,r.Z)({align:"center"},t),{},{direction:"row",ref:e}))}));i.displayName="HStack"},2730:function(t,e,n){n.d(e,{B1:function(){return c}});var r=n(3433),s=n(6992),o=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function a(t){return!!(0,s.Kn)(t)&&o.every((function(e){return Object.prototype.hasOwnProperty.call(t,e)}))}var i=n(7473),l=n(6198);function p(t){return"function"===typeof t}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}}var d=function(t){return function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];var o=[].concat(n),i=n[n.length-1];return a(i)&&o.length>1?o=o.slice(0,o.length-1):i=t,m.apply(void 0,(0,r.Z)(o.map((function(t){return function(e){return p(t)?t(e):u(e,t)}}))))(i)}},c=d(i.rS);d(i.wE);function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l.apply(void 0,[{}].concat(e,[x]))}function x(t,e,n,r){if((p(t)||p(e))&&Object.prototype.hasOwnProperty.call(r,n))return function(){var n=p(t)?t.apply(void 0,arguments):t,r=p(e)?e.apply(void 0,arguments):e;return l({},n,r,x)}}}}]);
//# sourceMappingURL=40.76eb9956.chunk.js.map