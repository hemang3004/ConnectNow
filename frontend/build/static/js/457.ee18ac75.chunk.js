"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[457],{4723:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var s=r(3433),t=r(4165),o=r(5861),a=r(9439),i=r(1295),l=r(8348),c=r(4087),d=r(7377),u=r(4224),h=r(4363),x=r(2338),m=r(3380),p=r(3763),f=r(7693),b=r(7521),j=r(7886),g=r(3204),C=r(1578),v=r(2791),k=r(1024),w=r(6971),S=r(3263),Z=r(7573),y=r(184);var z=function(){var e=(0,v.useState)(""),n=(0,a.Z)(e,2),r=n[0],z=n[1],I=(0,v.useState)([]),O=(0,a.Z)(I,2),A=O[0],E=O[1],q=(0,v.useState)(!1),W=(0,a.Z)(q,2),_=W[0],B=W[1],R=(0,v.useState)(!1),F=(0,a.Z)(R,2),J=F[0],L=F[1],U=(0,k.g)(),P=U.setSelectedChat,G=U.user,D=U.chats,K=U.setChats,N=(U.selectedItem,U.setSelectedItem),Y=(0,i.p)(),$=(0,l.q)(),H=$.isOpen,M=$.onOpen,Q=$.onClose,T=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var n,s,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return Y({title:"Please Enter something in search",status:"warning",duration:5e3,isClosable:!0,position:"top-left"}),e.abrupt("return");case 3:return e.prev=3,B(!0),n={headers:{Authorization:"Bearer ".concat(G.token)}},e.next=8,S.Z.get("/api/user?search=".concat(r),n);case 8:s=e.sent,o=s.data,B(!1),E(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),Y({title:"Error Occured!",description:"Failed to Load the Search Results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){var r,o,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),N("Chats"),e.prev=2,L(!0),r={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(G.token)}},e.next=7,S.Z.post("/api/chat",{userId:n},r);case 7:o=e.sent,a=o.data,D.find((function(e){return e._id===a._id}))||K([a].concat((0,s.Z)(D))),P(a),L(!1),Q(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),Y({title:"Error fetching the chat",description:e.t0.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-left"});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",w:"85%",borderRadius:"lg",borderWidth:"1px",children:(0,y.jsx)(d.u,{label:"Search Users to chat",hasArrow:!0,placement:"bottom-end",children:(0,y.jsx)(u.z,{variant:"ghost",onClick:M,h:12,children:(0,y.jsx)(h.J,{as:C.adB,boxSize:{md:6,sm:5,base:5},h:{md:12,sm:10,base:9}})})})}),(0,y.jsxs)(x.d,{placement:"left",onClose:Q,isOpen:H,children:[(0,y.jsx)(m.Z,{}),(0,y.jsxs)(p.s,{children:[(0,y.jsx)(f.x,{borderBottomWidth:"1px",children:"Search Users"}),(0,y.jsxs)(b.f,{children:[(0,y.jsxs)(c.xu,{display:"flex",pb:2,children:[(0,y.jsx)(j.I,{placeholder:"Search by name or email",mr:2,value:r,onChange:function(e){return z(e.target.value)}}),(0,y.jsx)(u.z,{onClick:T,children:"Go"})]}),_?(0,y.jsx)(w.Z,{}):null===A||void 0===A?void 0:A.map((function(e){return(0,y.jsx)(Z.Z,{user:e,handleFunction:function(){return V(e._id)}},e._id)})),J&&(0,y.jsx)(g.$,{ml:"auto",display:"flex"})]})]})]})]})},I=r(3425),O=r(5232),A=r(7732),E=r(3544),q=r(4653),W=r(6036),_=r(6856),B=r(7692),R=r(2730),F=r(4880),J=(0,R.B1)({breakpoints:{base:"100px",sm:"505px",md:"1351px",lg:"1229px",xl:"2304px","2xl":"4096px"}}),L=function(){var e=(0,k.g)(),n=e.selectedItem,r=e.setSelectedItem,s=e.user,t=(0,l.q)(),o=t.isOpen,a=t.onOpen,i=t.onClose,x=function(e){r(e)},p=(0,F.k6)();return(0,y.jsx)(I.x,{theme:J,children:(0,y.jsx)(c.xu,{width:"70px",m:0,bg:"#ffffff",borderWidth:"1px",minW:"65px",children:(0,y.jsxs)(O.K,{spacing:8,mt:5,ml:2,children:[(0,y.jsx)(A.q,{size:"md",cursor:"pointer",src:"https://res.cloudinary.com/dm37epkmg/image/upload/v1681997756/rxjix4do2njfhgohjvlc.jpg"}),(0,y.jsx)(z,{}),(0,y.jsx)(d.u,{label:"Chats",hasArrow:!0,placement:"bottom-end",children:(0,y.jsx)(c.xu,{onClick:function(){x("Chats")},display:"flex",cursor:"pointer",bg:"Chats"===n?"#4c6ed5":"#ffffff",color:"Chats"===n?"#ffffff":"black",w:"85%",borderRadius:"lg",borderWidth:"1px",children:(0,y.jsx)(h.J,{as:B.Dij,ml:{md:3,sm:3,base:3},boxSize:{md:6,sm:5,base:5},h:{md:12,sm:10,base:9}})},1)}),(0,y.jsx)(d.u,{label:"Channels",hasArrow:!0,placement:"bottom-end",children:(0,y.jsx)(c.xu,{onClick:function(){x("Channel")},display:"flex",cursor:"pointer",bg:"Channel"===n?"#4c6ed5":"#ffffff",color:"Channel"===n?"#ffffff":"black",w:"85%",borderRadius:"lg",borderWidth:"1px",children:(0,y.jsx)(h.J,{as:W.gGC,ml:{md:3,sm:3,base:3},boxSize:{md:6,sm:5,base:5},h:{md:12,sm:10,base:9}})},2)}),(0,y.jsx)(d.u,{label:"Profile",hasArrow:!0,placement:"bottom-end",children:(0,y.jsx)(c.xu,{onClick:function(){x("UpdateUser")},display:"flex",cursor:"pointer",color:"black",w:"80%",children:null!==s&&void 0!==s&&s.pic?(0,y.jsx)(A.q,{size:"sm",cursor:"pointer",name:null===s||void 0===s?void 0:s.name,src:null===s||void 0===s?void 0:s.pic,ml:2}):(0,y.jsx)(A.q,{size:"sm",cursor:"pointer",name:null===s||void 0===s?void 0:s.name,ml:2})},3)}),(0,y.jsx)(d.u,{label:"Log-out",hasArrow:!0,placement:"bottom-end",children:(0,y.jsxs)(c.xu,{onClick:a,display:"flex",cursor:"pointer",color:"black",w:"85%",children:[(0,y.jsx)(h.J,{as:_.LvP,ml:{md:3,sm:3,base:3},boxSize:{md:8,sm:7,base:6},h:{md:16,sm:16,base:9}}),(0,y.jsx)(E.a,{isOpen:o,onClose:i,isCentered:!0,children:(0,y.jsx)(m.Z,{children:(0,y.jsxs)(E._,{children:[(0,y.jsx)(f.x,{children:"Log Out"}),(0,y.jsx)(b.f,{children:"Are you sure want to log out?"}),(0,y.jsxs)(q.m,{children:[(0,y.jsx)(u.z,{onClick:i,ml:3,children:"NO"}),(0,y.jsx)(u.z,{onClick:function(){localStorage.removeItem("userInfo"),localStorage.clear(),p.push("/"),window.location.reload()},colorScheme:"red",ml:3,children:"YES"})]})]})})})]},4)})]})})})}},7573:function(e,n,r){var s=r(7732),t=r(4087),o=r(9229),a=(r(2791),r(184));n.Z=function(e){var n=e.user,r=e.handleFunction;return(0,a.jsxs)(t.xu,{onClick:r,cursor:"pointer",bg:"#E8E8E8",_hover:{background:"#2b6cb0",color:"white"},w:"100%",d:"flex",alignItems:"center",color:"black",px:3,py:2,mb:2,borderRadius:"lg",children:[(0,a.jsx)(s.q,{mr:2,size:"sm",cursor:"pointer",name:n.name,src:n.pic}),(0,a.jsxs)(t.xu,{children:[(0,a.jsx)(o.x,{children:n.name}),(0,a.jsxs)(o.x,{fontSize:"xs",children:[(0,a.jsx)("b",{children:"Email : "}),n.email]})]})]})}}}]);
//# sourceMappingURL=457.ee18ac75.chunk.js.map